{
  "$schema": "https://unpkg.com/@camunda/element-templates-json-schema/resources/schema.json",
  "name": "Catalyst - Full Content Analysis (Grok)",
  "id": "io.catalyst.template.full-analysis-grok",
  "description": "Generate content and perform full analysis (sentiment, summary, key points, entities, risk) in one call using Grok API via n8n",
  "version": 1,
  "appliesTo": ["bpmn:ServiceTask"],
  "icon": {
    "contents": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23a855f7' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z'%3E%3C/path%3E%3Cpath d='M5 3v4'%3E%3C/path%3E%3Cpath d='M19 17v4'%3E%3C/path%3E%3Cpath d='M3 5h4'%3E%3C/path%3E%3Cpath d='M17 19h4'%3E%3C/path%3E%3C/svg%3E"
  },
  "groups": [
    {
      "id": "connection",
      "label": "ðŸ”— Connection"
    },
    {
      "id": "input",
      "label": "ðŸ“¤ Input"
    },
    {
      "id": "output",
      "label": "ðŸ“¥ Output"
    }
  ],
  "properties": [
    {
      "label": "Implementation",
      "type": "Hidden",
      "value": "io.catalyst.camunda.catalystconnector.CatalystConnector",
      "binding": {
        "type": "property",
        "name": "camunda:class"
      }
    },
    {
      "label": "n8n Webhook URL",
      "description": "Full URL to your n8n full analysis webhook (Grok-powered)",
      "type": "String",
      "value": "http://localhost:5678/webhook/full-content-analysis",
      "binding": {
        "type": "camunda:inputParameter",
        "name": "webhookUrl"
      },
      "group": "connection",
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "label": "Payload",
      "description": "Payload sent to n8n (uses process variables: keywords, scenario, length)",
      "type": "Text",
      "value": "{keywords: keywords, scenario: scenario, length: length}",
      "binding": {
        "type": "camunda:inputParameter",
        "name": "payload",
        "scriptFormat": "feel"
      },
      "group": "input"
    },
    {
      "label": "Output Mapping",
      "description": "Maps the full Grok analysis response to process variables (plain JSON - no FEEL)",
      "type": "String",
      "value": "{\n  \"content\": \"$.content\",\n  \"sentiment\": \"$.sentiment\",\n  \"confidence\": \"$.confidence\",\n  \"explanation\": \"$.explanation\",\n  \"summary\": \"$.summary\",\n  \"keyPoints\": \"$.keyPoints\",\n  \"people\": \"$.people\",\n  \"organizations\": \"$.organizations\",\n  \"locations\": \"$.locations\",\n  \"dates\": \"$.dates\",\n  \"riskAssessment\": \"$.riskAssessment\",\n  \"riskLevel\": \"$.riskLevel\"\n}",
      "binding": {
        "type": "camunda:inputParameter",
        "name": "outputMapping"
      },
      "group": "output"
    },
    {
      "label": "Timeout (seconds)",
      "description": "Request timeout in seconds (Grok calls may take 15-40s)",
      "type": "String",
      "value": "60",
      "binding": {
        "type": "camunda:inputParameter",
        "name": "timeout"
      },
      "group": "connection"
    }
  ]
}