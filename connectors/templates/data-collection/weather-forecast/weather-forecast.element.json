{
  "$schema": "https://unpkg.com/@camunda/element-templates-json-schema/resources/schema.json",
  "name": "Catalyst - Weather Forecast",
  "id": "io.catalyst.template.weather-forecast",
  "description": "Get current weather and forecast data using the Open-Meteo API (free, no API key required)",
  "version": 1,
  "appliesTo": ["bpmn:ServiceTask"],
  "icon": {
    "contents": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23f59e0b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 2v2'%3E%3C/path%3E%3Cpath d='M12 20v2'%3E%3C/path%3E%3Cpath d='m4.93 4.93 1.41 1.41'%3E%3C/path%3E%3Cpath d='m17.66 17.66 1.41 1.41'%3E%3C/path%3E%3Cpath d='M2 12h2'%3E%3C/path%3E%3Cpath d='M20 12h2'%3E%3C/path%3E%3Cpath d='m6.34 17.66-1.41 1.41'%3E%3C/path%3E%3Cpath d='m19.07 4.93-1.41 1.41'%3E%3C/path%3E%3Ccircle cx='12' cy='12' r='4'%3E%3C/circle%3E%3C/svg%3E"
  },
  "groups": [
    {
      "id": "connection",
      "label": "üîó Connection"
    },
    {
      "id": "input",
      "label": "üìç Input"
    },
    {
      "id": "output",
      "label": "üì• Output"
    }
  ],
  "properties": [
    {
      "label": "Implementation",
      "type": "String",
      "value": "io.catalyst.bridge.CatalystBridge",
      "binding": {
        "type": "property",
        "name": "camunda:class"
      }
    },
        {
      "label": "n8n Webhook URL",
      "description": "Full URL to your n8n HTTP request webhook",
      "type": "String",
      "value": "http://catalyst-n8n:5678/webhook/catalyst-http-weather-request",
      "binding": {
        "type": "camunda:inputParameter",
        "name": "webhookUrl"
      },
      "group": "connection",
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "label": "Timeout (seconds)",
      "description": "Request timeout in seconds",
      "type": "String",
      "value": "30",
      "binding": {
        "type": "camunda:inputParameter",
        "name": "timeout"
      },
      "group": "connection"
    },
    {
      "label": "Payload",
      "description": "HTTP request configuration as JSON string. Use ${variableName} syntax to reference process variables.",
      "type": "Text",
      "value": "{\n  \"method\": \"GET\",\n  \"url\": \"https://api.open-meteo.com/v1/forecast\",\n  \"headers\": {},\n  \"queryParams\": {\n    \"latitude\": \"${latitude}\",\n    \"longitude\": \"${longitude}\",\n    \"current\": \"temperature_2m,relative_humidity_2m,wind_speed_10m,weather_code\",\n    \"temperature_unit\": \"${temperatureUnit}\"\n  },\n  \"body\": {}\n}",
      "binding": {
        "type": "camunda:inputParameter",
        "name": "payload"
      },
      "group": "input",
      "constraints": {
        "notEmpty": true
      }
    },

    {
      "label": "Output Mapping",
      "description": "Maps the weather API response to process variables to be returned by the Catalyst Bridge",
      "type": "Text",
      "value": "{\n  \"success\": \"$.success\",\n  \"statusCode\": \"$.statusCode\",\n  \"weatherData\": \"$.responseBody\",\n  \"temperature\": \"$.responseBody.current.temperature_2m\",\n  \"temperatureUnit\": \"$.responseBody.current_units.temperature_2m\",\n  \"humidity\": \"$.responseBody.current.relative_humidity_2m\",\n  \"humidityUnit\": \"$.responseBody.current_units.relative_humidity_2m\",\n  \"windSpeed\": \"$.responseBody.current.wind_speed_10m\",\n  \"windSpeedUnit\": \"$.responseBody.current_units.wind_speed_10m\",\n  \"weatherCode\": \"$.responseBody.current.weather_code\",\n  \"error\": \"$.error\"\n}",
      "binding": {
        "type": "camunda:inputParameter",
        "name": "outputMapping"
      },
      "group": "output"
    }
  ]
}